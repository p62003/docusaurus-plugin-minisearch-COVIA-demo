"use strict";(self.webpackChunkcovia_plugin_demo=self.webpackChunkcovia_plugin_demo||[]).push([[3683],{9423:(s,e,n)=>{n.r(e),n.d(e,{default:()=>h});var t=n(6540),l=n(6347),r=n(513),c=n(6316),i=n(2077),o=n(4731),a=n(4848);function h(){const{searchConfig:s}=(0,i.P_)("docusaurus-plugin-minisearch")||{},{search:e}=(0,l.zy)(),n=new URLSearchParams(e).get("q")||"",[h,u]=(0,t.useState)([]),[d,x]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),{indexPath:j="/search-index.json",searchFields:f=["title","content"],resultFields:p=["title","url","excerpt"],maxResults:A=10}=s||{},N=(s,e)=>{if(!s||!e)return s;const n=e.trim().split(/\s+/).filter((s=>s.length>1));if(0===n.length)return s;let t=s;return n.forEach((s=>{const e=new RegExp(`(${s})`,"gi");t=t.replace(e,'<span class="'+o.A.highlight+'">$1</span>')})),t},w=s=>{const e=(()=>{const s=document.querySelector('meta[name="docusaurus-base-url"]')?.getAttribute("content");if(s)return s.endsWith("/")?s:s+"/";const e=window.location.pathname;if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname){const s=e.match(/^(\/[^\/]+)\//);if(s&&"/search-results"!==s[1])return console.log("\u672c\u5730\u74b0\u5883\u6aa2\u6e2c\u5230\u8def\u5f91\u524d\u7db4:",s[1]),s[1]+"/"}if(e.includes("/docusaurus-plugin-minisearch-COVIA-demo/"))return"/docusaurus-plugin-minisearch-COVIA-demo/";const n=e.indexOf("/search-results");if(n>0)return e.substring(0,n)+"/";const t=document.querySelector('a[href*="/docs/"]');if(t){const s=t.getAttribute("href"),e=s.indexOf("/docs/");if(e>0)return s.substring(0,e)+"/"}return"/"})();return console.log("\u6aa2\u6e2c\u5230\u7684\u57fa\u790e\u8def\u5f91:",e,"\u539f\u59cb URL:",s),s.endsWith("/README")&&(s=s.substring(0,s.length-7)||"/docs"),s.startsWith("/")&&!s.startsWith(e)&&(s=e+s.substring(1),console.log("\u4fee\u6b63\u5f8c\u7684 URL:",s)),s};(0,t.useEffect)((()=>{!async function(){if(n){x(!0),g(null);try{console.log("\u958b\u59cb\u57f7\u884c\u641c\u5c0b...");const e=[j,"./search-index.json","/search-index.json",window.location.pathname.split("/search-results")[0]+"/search-index.json","/docusaurus-plugin-minisearch-COVIA-demo/search-index.json"],t=[...new Set(e)];console.log("\u5c07\u5617\u8a66\u4ee5\u4e0b\u8def\u5f91:",t);let l=!1,c=null;for(const i of t)try{console.log(`\u5617\u8a66\u8def\u5f91: ${i}`);const s=await fetch(i);if(!s.ok){console.log(`\u8def\u5f91 ${i} \u8fd4\u56de\u72c0\u614b: ${s.status}`);continue}const e=await s.text();if(e.trim().startsWith("<!DOCTYPE")||e.trim().startsWith("<html")){console.log(`\u8def\u5f91 ${i} \u8fd4\u56de HTML \u800c\u975e JSON`);continue}console.log(`\u6210\u529f\u5f9e ${i} \u7372\u53d6\u7d22\u5f15\u5167\u5bb9`);const t=r.A.loadJSON(e,{fields:f,storeFields:p});console.log(`\u4f7f\u7528\u95dc\u9375\u8a5e "${n}" \u57f7\u884c\u641c\u5c0b`);const c=t.search(n,{prefix:!0,boost:{title:2},fuzzy:.2});console.log(`\u627e\u5230 ${c.length} \u500b\u7d50\u679c`),u(c.slice(0,A)),l=!0;break}catch(s){console.warn(`\u8def\u5f91 ${i} \u7372\u53d6\u5931\u6557:`,s),c=s}if(!l)throw console.error("\u6240\u6709\u8def\u5f91\u90fd\u5931\u6557"),c||new Error("\u7121\u6cd5\u8f09\u5165\u641c\u5c0b\u7d22\u5f15")}catch(s){console.error("\u641c\u5c0b\u51fa\u932f:",s),g("\u7121\u6cd5\u8f09\u5165\u641c\u5c0b\u7d22\u5f15\u3002\u8acb\u78ba\u4fdd search-index.json \u6587\u4ef6\u5df2\u6b63\u78ba\u751f\u6210\u4e26\u653e\u7f6e\u5728\u9069\u7576\u4f4d\u7f6e\u3002")}finally{x(!1)}}}()}),[n,j,f,p,A]);return(0,a.jsx)(c.A,{title:n?`\u641c\u5c0b\u7d50\u679c: ${n}`:"\u641c\u5c0b",description:"\u6587\u6a94\u641c\u5c0b\u7d50\u679c",children:(0,a.jsx)("main",{className:"container margin-vert--lg",children:d?(0,a.jsxs)("div",{className:o.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u641c\u5c0b\u4e2d..."}),(0,a.jsx)("div",{className:o.A.loader})]}):m?(0,a.jsxs)("div",{className:o.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u641c\u5c0b\u932f\u8aa4"}),(0,a.jsx)("p",{className:o.A.error,children:m}),(0,a.jsxs)("div",{className:o.A.debugInfo,children:[(0,a.jsx)("h3",{children:"\u8abf\u8a66\u4fe1\u606f"}),(0,a.jsx)("p",{children:"\u5982\u679c\u60a8\u662f\u7db2\u7ad9\u7ba1\u7406\u54e1\uff0c\u8acb\u6aa2\u67e5\uff1a"}),(0,a.jsxs)("ol",{children:[(0,a.jsx)("li",{children:"static/search-index.json \u6a94\u6848\u662f\u5426\u5b58\u5728"}),(0,a.jsx)("li",{children:"\u6a94\u6848\u662f\u5426\u70ba\u6709\u6548\u7684 JSON \u683c\u5f0f"}),(0,a.jsx)("li",{children:"\u6253\u958b\u700f\u89bd\u5668\u958b\u767c\u8005\u5de5\u5177\uff0c\u5207\u63db\u5230\u7db2\u8def\u6a19\u7c64\uff0c\u5617\u8a66\u641c\u5c0b\u4e26\u67e5\u770b\u7db2\u8def\u8acb\u6c42"})]})]})]}):n?0===h.length?(0,a.jsxs)("div",{className:o.A.searchResults,children:[(0,a.jsxs)("h2",{children:["\u641c\u5c0b\u7d50\u679c: ",n]}),(0,a.jsxs)("p",{children:['\u6c92\u6709\u627e\u5230\u7b26\u5408 "',n,'" \u7684\u5167\u5bb9\u3002']}),(0,a.jsxs)("ul",{className:o.A.suggestions,children:[(0,a.jsx)("li",{children:"\u8acb\u78ba\u8a8d\u62fc\u5beb\u662f\u5426\u6b63\u78ba"}),(0,a.jsx)("li",{children:"\u5617\u8a66\u4f7f\u7528\u4e0d\u540c\u7684\u95dc\u9375\u5b57"}),(0,a.jsx)("li",{children:"\u5617\u8a66\u4f7f\u7528\u66f4\u4e00\u822c\u7684\u8a5e\u5f59"})]})]}):(0,a.jsxs)("div",{className:o.A.searchResults,children:[(0,a.jsxs)("h2",{children:["\u641c\u5c0b\u7d50\u679c: ",n]}),(0,a.jsxs)("p",{className:o.A.resultCount,children:["\u5171\u627e\u5230 ",h.length," \u500b\u7d50\u679c"]}),(0,a.jsx)("ul",{className:o.A.resultList,children:h.map(((s,e)=>(0,a.jsxs)("li",{className:o.A.resultItem,children:[(0,a.jsx)("a",{href:w(s.url),className:o.A.resultTitle,children:s.title}),s.excerpt&&(0,a.jsx)("p",{className:o.A.resultExcerpt,dangerouslySetInnerHTML:{__html:N(s.excerpt,n)}}),(0,a.jsx)("a",{href:w(s.url),className:o.A.resultLink,children:"\u67e5\u770b\u6587\u6a94 \u2192"})]},e)))})]}):(0,a.jsxs)("div",{className:o.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u6587\u6a94\u641c\u5c0b"}),(0,a.jsx)("p",{children:"\u8acb\u5728\u4e0a\u65b9\u641c\u5c0b\u6846\u8f38\u5165\u95dc\u9375\u5b57\u3002"})]})})})}}}]);