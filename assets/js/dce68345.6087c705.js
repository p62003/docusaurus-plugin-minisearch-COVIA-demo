"use strict";(self.webpackChunkcovia_plugin_demo=self.webpackChunkcovia_plugin_demo||[]).push([[3683],{9423:(e,s,o)=>{o.r(s),o.d(s,{default:()=>h});var t=o(6540),n=o(6347),r=o(513),l=o(6316),c=o(2077),i=o(4731),a=o(4848);function h(){const{searchConfig:e}=(0,c.P_)("docusaurus-plugin-minisearch")||{},{search:s}=(0,n.zy)(),o=new URLSearchParams(s).get("q")||"",[h,d]=(0,t.useState)([]),[u,g]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),{indexPath:x="/search-index.json",searchFields:f=["title","content"],resultFields:j=["title","url","excerpt"],maxResults:w=10,highlightColor:b="#ffeb3b"}=e||{},$=function(e,s,o,t){if(void 0===t&&(t=!1),!e||!s&&!o)return e;const n=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=s.trim().split(/\s+/).filter((e=>e.length>0)),l=o?o.trim().split(/\s+/).filter((e=>e.length>0)):[],c=[...new Set([...r,...l])];if(0===c.length)return e;let i=e;console.log("\u539f\u59cb\u6587\u672c:",e),console.log("\u641c\u5c0b\u8a5e:",c);let a=!1;if(l.forEach((s=>{try{if(e.toLowerCase().includes(s.toLowerCase())){a=!0,console.log(`\u627e\u5230\u539f\u59cb\u8a5e\u5339\u914d: "${s}"`);const e=n(s),o=new RegExp(`(${e})`,"gi");i=i.replace(o,`<span class="search-highlight" style="background-color:${b} !important;color:#000 !important;padding:0 2px;border-radius:2px;font-weight:bold;">$1</span>`)}}catch(o){console.error("\u539f\u59cb\u8a5e\u5339\u914d\u932f\u8aa4:",o)}})),a||r.forEach((s=>{if(e.toLowerCase().includes(s.toLowerCase())){a=!0,console.log(`\u627e\u5230\u5b8c\u6574\u8a5e\u5339\u914d: "${s}"`);const e=n(s),o=new RegExp(`(${e})`,"gi");i=i.replace(o,`<span class="search-highlight" style="background-color:${b} !important;color:#000 !important;padding:0 2px;border-radius:2px;font-weight:bold;">$1</span>`)}})),!a&&(console.log("\u6c92\u6709\u627e\u5230\u5339\u914d\u9805\uff0c\u5617\u8a66\u90e8\u5206\u5339\u914d"),c.forEach((s=>{try{const o=n(s),t=new RegExp(`([^\\s]*${o}[^\\s]*)`,"gi"),r=e.match(t);if(r&&r.length>0)console.log(`\u627e\u5230\u5305\u542b\u5339\u914d: ${r.join(", ")}`),i=i.replace(t,`<span class="search-highlight" style="background-color:${b} !important;color:#000 !important;padding:0 2px;border-radius:2px;font-weight:bold;">$1</span>`),a=!0;else if(s.length>=3)for(let l=0;l<s.length-2;l++){const o=s.substring(l,l+3),t=n(o),r=new RegExp(`(${t})`,"gi");if(e.toLowerCase().includes(o.toLowerCase())){console.log(`\u627e\u5230\u90e8\u5206\u8a5e\u5339\u914d: ${o}`),i=i.replace(r,`<span class="search-highlight" style="background-color:${b} !important;color:#000 !important;padding:0 2px;border-radius:2px;font-weight:bold;">$1</span>`),a=!0;break}}}catch(o){console.error("\u90e8\u5206\u5339\u914d\u932f\u8aa4:",o)}})),t&&!a&&e.length>0)){console.log("\u5f37\u5236\u9ad8\u4eae\u7b2c\u4e00\u500b\u55ae\u8a5e");const s=e.split(/\s+/)[0];s&&s.length>0&&(i=i.replace(s,`<span class="search-highlight" style="background-color:${b} !important;color:#000 !important;padding:0 2px;border-radius:2px;font-weight:bold;">${s}</span>`),a=!0)}return console.log("\u8655\u7406\u5f8c\u6587\u672c:",i),console.log("\u662f\u5426\u6709\u5339\u914d:",a),i},A=e=>{const s=(()=>{const e=document.querySelector('meta[name="docusaurus-base-url"]')?.getAttribute("content");if(e)return e.endsWith("/")?e:e+"/";const s=window.location.pathname;if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname){const e=s.match(/^(\/[^\/]+)\//);if(e&&"/search-results"!==e[1])return console.log("\u672c\u5730\u74b0\u5883\u6aa2\u6e2c\u5230\u8def\u5f91\u524d\u7db4:",e[1]),e[1]+"/"}if(s.includes("/docusaurus-plugin-minisearch-COVIA-demo/"))return"/docusaurus-plugin-minisearch-COVIA-demo/";const o=s.indexOf("/search-results");if(o>0)return s.substring(0,o)+"/";const t=document.querySelector('a[href*="/docs/"]');if(t){const e=t.getAttribute("href"),s=e.indexOf("/docs/");if(s>0)return e.substring(0,s)+"/"}return"/"})();return console.log("\u6aa2\u6e2c\u5230\u7684\u57fa\u790e\u8def\u5f91:",s,"\u539f\u59cb URL:",e),e.endsWith("/README")&&(e=e.substring(0,e.length-7)||"/docs"),e.startsWith("/")&&!e.startsWith(s)&&(e=s+e.substring(1),console.log("\u4fee\u6b63\u5f8c\u7684 URL:",e)),e};(0,t.useEffect)((()=>{!async function(){if(o){g(!0),m(null);try{console.log("\u958b\u59cb\u57f7\u884c\u641c\u5c0b...");const s=[x,"./search-index.json","/search-index.json",window.location.pathname.split("/search-results")[0]+"/search-index.json","/docusaurus-plugin-minisearch-COVIA-demo/search-index.json"],t=[...new Set(s)];console.log("\u5c07\u5617\u8a66\u4ee5\u4e0b\u8def\u5f91:",t);let n=!1,l=null;for(const c of t)try{console.log(`\u5617\u8a66\u8def\u5f91: ${c}`);const e=await fetch(c);if(!e.ok){console.log(`\u8def\u5f91 ${c} \u8fd4\u56de\u72c0\u614b: ${e.status}`);continue}const s=await e.text();if(s.trim().startsWith("<!DOCTYPE")||s.trim().startsWith("<html")){console.log(`\u8def\u5f91 ${c} \u8fd4\u56de HTML \u800c\u975e JSON`);continue}console.log(`\u6210\u529f\u5f9e ${c} \u7372\u53d6\u7d22\u5f15\u5167\u5bb9`);const t=r.A.loadJSON(s,{fields:f,storeFields:j});console.log(`\u4f7f\u7528\u95dc\u9375\u8a5e "${o}" \u57f7\u884c\u641c\u5c0b`);const l=t.search(o,{prefix:!0,boost:{title:2},fuzzy:.2});console.log(`\u627e\u5230 ${l.length} \u500b\u7d50\u679c`);const i=new Set;l.forEach((e=>{e.terms?e.terms.forEach((e=>i.add(e))):o.trim().split(/\s+/).forEach((e=>i.add(e)))})),console.log("\u5339\u914d\u7684\u8a5e:",Array.from(i));const a=l.map((e=>({...e,matchTerms:Array.from(i)})));d(a.slice(0,w)),n=!0;break}catch(e){console.warn(`\u8def\u5f91 ${c} \u7372\u53d6\u5931\u6557:`,e),l=e}if(!n)throw console.error("\u6240\u6709\u8def\u5f91\u90fd\u5931\u6557"),l||new Error("\u7121\u6cd5\u8f09\u5165\u641c\u5c0b\u7d22\u5f15")}catch(e){console.error("\u641c\u5c0b\u51fa\u932f:",e),m("\u7121\u6cd5\u8f09\u5165\u641c\u5c0b\u7d22\u5f15\u3002\u8acb\u78ba\u4fdd search-index.json \u6587\u4ef6\u5df2\u6b63\u78ba\u751f\u6210\u4e26\u653e\u7f6e\u5728\u9069\u7576\u4f4d\u7f6e\u3002")}finally{g(!1)}}}()}),[o,x,f,j,w]);return(0,a.jsx)(l.A,{title:o?`\u641c\u5c0b\u7d50\u679c: ${o}`:"\u641c\u5c0b",description:"\u6587\u6a94\u641c\u5c0b\u7d50\u679c",children:(0,a.jsx)("main",{className:"container margin-vert--lg",children:u?(0,a.jsxs)("div",{className:i.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u641c\u5c0b\u4e2d..."}),(0,a.jsx)("div",{className:i.A.loader})]}):p?(0,a.jsxs)("div",{className:i.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u641c\u5c0b\u932f\u8aa4"}),(0,a.jsx)("p",{className:i.A.error,children:p}),(0,a.jsxs)("div",{className:i.A.debugInfo,children:[(0,a.jsx)("h3",{children:"\u8abf\u8a66\u4fe1\u606f"}),(0,a.jsx)("p",{children:"\u5982\u679c\u60a8\u662f\u7db2\u7ad9\u7ba1\u7406\u54e1\uff0c\u8acb\u6aa2\u67e5\uff1a"}),(0,a.jsxs)("ol",{children:[(0,a.jsx)("li",{children:"static/search-index.json \u6a94\u6848\u662f\u5426\u5b58\u5728"}),(0,a.jsx)("li",{children:"\u6a94\u6848\u662f\u5426\u70ba\u6709\u6548\u7684 JSON \u683c\u5f0f"}),(0,a.jsx)("li",{children:"\u6253\u958b\u700f\u89bd\u5668\u958b\u767c\u8005\u5de5\u5177\uff0c\u5207\u63db\u5230\u7db2\u8def\u6a19\u7c64\uff0c\u5617\u8a66\u641c\u5c0b\u4e26\u67e5\u770b\u7db2\u8def\u8acb\u6c42"})]})]})]}):o?0===h.length?(0,a.jsxs)("div",{className:i.A.searchResults,children:[(0,a.jsxs)("h2",{children:["\u641c\u5c0b\u7d50\u679c: ",o]}),(0,a.jsxs)("p",{children:['\u6c92\u6709\u627e\u5230\u7b26\u5408 "',o,'" \u7684\u5167\u5bb9\u3002']}),(0,a.jsxs)("ul",{className:i.A.suggestions,children:[(0,a.jsx)("li",{children:"\u8acb\u78ba\u8a8d\u62fc\u5beb\u662f\u5426\u6b63\u78ba"}),(0,a.jsx)("li",{children:"\u5617\u8a66\u4f7f\u7528\u4e0d\u540c\u7684\u95dc\u9375\u5b57"}),(0,a.jsx)("li",{children:"\u5617\u8a66\u4f7f\u7528\u66f4\u4e00\u822c\u7684\u8a5e\u5f59"})]})]}):(console.log("\u641c\u5c0b\u7d50\u679c:",h),console.log("\u641c\u5c0b\u8a5e:",o),(0,a.jsxs)("div",{className:i.A.searchResults,children:[(0,a.jsxs)("h2",{children:["\u641c\u5c0b\u7d50\u679c: ",o]}),(0,a.jsxs)("p",{className:i.A.resultCount,children:["\u5171\u627e\u5230 ",h.length," \u500b\u7d50\u679c"]}),(0,a.jsx)("ul",{className:i.A.resultList,children:h.map(((e,s)=>{const t=e.matchTerms||o.trim().split(/\s+/);console.log(`\u7d50\u679c ${s} \u5339\u914d\u7684\u8a5e:`,t);const n=e.excerpt?$(e.excerpt,t.join(" "),o,!1):"";console.log(`\u7d50\u679c ${s} \u9ad8\u4eae\u5f8c:`,n);const r=$(e.title,t.join(" "),o,!1);return(0,a.jsxs)("li",{className:i.A.resultItem,children:[(0,a.jsx)("a",{href:A(e.url),className:i.A.resultTitle,dangerouslySetInnerHTML:{__html:r}}),e.excerpt&&(0,a.jsx)("p",{className:i.A.resultExcerpt,dangerouslySetInnerHTML:{__html:n}}),(0,a.jsx)("a",{href:A(e.url),className:i.A.resultLink,children:"\u67e5\u770b\u6587\u6a94 \u2192"})]},s)}))})]})):(0,a.jsxs)("div",{className:i.A.searchResults,children:[(0,a.jsx)("h2",{children:"\u6587\u6a94\u641c\u5c0b"}),(0,a.jsx)("p",{children:"\u8acb\u5728\u4e0a\u65b9\u641c\u5c0b\u6846\u8f38\u5165\u95dc\u9375\u5b57\u3002"})]})})})}}}]);