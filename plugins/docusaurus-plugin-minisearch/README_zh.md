# Covia Docusaurus MiniSearch Plugin

Covia MiniSearch Plugin æ˜¯ä¸€å€‹ç‚º Docusaurus å°å‹è‡³ä¸­å‹çŸ¥è­˜åº«ç¶²ç«™è¨­è¨ˆçš„è¼•é‡å‹æœ¬åœ°æœå°‹è§£æ±ºæ–¹æ¡ˆã€‚  
å®ƒä¸»æ‰“å¿«é€Ÿéƒ¨ç½²ã€ç°¡å–®æ•´åˆï¼Œç‰¹åˆ¥é©åˆä¸å…·å‚™å°ˆæ¥­é–‹ç™¼èƒŒæ™¯çš„ä½¿ç”¨è€…ã€‚  
æ­¤æ’ä»¶å®Œå…¨æ–¼å‰ç«¯é‹è¡Œï¼Œç„¡éœ€é¡å¤–çš„å¾Œç«¯ä¼ºæœå™¨æ”¯æŒï¼Œé©åˆå€‹äººã€åœ˜éšŠèˆ‡ä¸­å°å‹å°ˆæ¡ˆä½¿ç”¨ã€‚

> ğŸ“¢ **é‡è¦èªªæ˜**  
> æœ¬æ’ä»¶è¨­è¨ˆç›®æ¨™ç‚º**ä¸­å°å‹ã€ä¸»è¦ä»¥è‹±æ–‡å…§å®¹ç‚ºä¸»**çš„ç¶²ç«™ã€‚  
> æœ¬æ’ä»¶**ä¸é©ç”¨æ–¼**ä»¥ä¸‹æƒ…å¢ƒï¼š
> - è¶…å¤§å‹æ–‡ä»¶è³‡æ–™åº«
> - å¤šèªè¨€ç¶²ç«™
> - éœ€è¦**ä¸­æ–‡ï¼ˆç¹é«”æˆ–ç°¡é«”ï¼‰æ–·è©å„ªåŒ–**çš„å ´æ™¯  
> 
> âš ï¸ ç”±æ–¼åº•å±¤ MiniSearch çš„æ–·è©æ©Ÿåˆ¶é™åˆ¶ï¼Œ**æœ¬æ’ä»¶ç„¡æ³•æ­£ç¢ºæ”¯æ´ä¸­æ–‡æœå°‹**ã€‚å»ºè­°åƒ…ä½¿ç”¨æ–¼è‹±æ–‡æˆ–å…¶ä»–ä»¥ç©ºæ ¼åˆ†éš”å–®è©çš„èªè¨€ã€‚  
> 
> è‹¥æœ‰å¤§å‹ã€å¤šèªè¨€æˆ–ä¸­æ–‡æœå°‹å„ªåŒ–ç­‰é€²éšéœ€æ±‚ï¼Œå»ºè­°æ”¹ç”¨å¦‚ `@easyops-cn/docusaurus-search-local` ç­‰å…¶ä»–è§£æ±ºæ–¹æ¡ˆã€‚



**ğŸŒŸ Live Demo / ç·šä¸Šå±•ç¤º**
- æ‚¨å¯ä»¥åœ¨æ­¤æŸ¥çœ‹æœ¬æ’ä»¶çš„ç·šä¸Šç¤ºç¯„ç¶²ç«™ï¼š  
- ğŸ”— [https://p62003.github.io/docusaurus-plugin-minisearch-COVIA-demo/docs/](https://p62003.github.io/docusaurus-plugin-minisearch-COVIA-demo/docs/)


**ğŸŒŸ Plugin Repository**
- å¦‚æœæ‚¨æƒ³æŸ¥çœ‹æ’ä»¶åŸå§‹ç¢¼ï¼Œè«‹å‰å¾€ï¼š  
- ğŸ”— [covia-docusaurus-minisearch-plugin](https://github.com/p62003/covia-docusaurus-minisearch-plugin)


**ğŸŒ Available Languages:**
- [English (Default)](README.md)
- [ç¹é«”ä¸­æ–‡ (Traditional Chinese)](README_zh.md)



## æª”æ¡ˆçµæ§‹

```
my-website/
â”‚
â”œâ”€â”€ plugins/
â”‚   â”‚
â”‚   â””â”€â”€ docusaurus-plugin-minisearch/
â”‚       â”‚
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ indexGenerator.js
â”‚       â”œâ”€â”€ SearchBar.js
â”‚       â”œâ”€â”€ SearchResults.js
â”‚       â”œâ”€â”€ styles.module.css
â”‚       â”œâ”€â”€ README.md
â”‚       â””â”€â”€ LICENSE
```

## åŠŸèƒ½ç‰¹é»

* **å³æ™‚æœå°‹**ï¼šæä¾›é«˜æ•ˆã€å³æ™‚çš„å‰ç«¯æœå°‹é«”é©—
* **é—œéµå­—é«˜äº®**ï¼šä½¿ç”¨å¤šå±¤æ¬¡åŒ¹é…ç­–ç•¥ï¼Œå¾ç²¾ç¢ºåŒ¹é…åˆ°æ¨¡ç³ŠåŒ¹é…
* **æ¨¡ç³Šæœå°‹**ï¼šæ”¯æ´æ‹¼å¯«éŒ¯èª¤å’Œè¿‘ä¼¼åŒ¹é…ï¼ˆå®¹è¨± 20% çš„ç·¨è¼¯è·é›¢ï¼‰
* **å‰ç¶´æœå°‹**ï¼šæ”¯æ´è¼¸å…¥éƒ¨åˆ†è©èªé€²è¡ŒåŒ¹é…
* **å­—æ®µåŠ æ¬Š**ï¼šå°æ¨™é¡Œè¨­ç½®æ›´é«˜æ¬Šé‡ï¼ˆ2å€ï¼‰ï¼Œæé«˜ç›¸é—œæ€§
* **ç„¡ç¸«æ•´åˆ**ï¼šå®Œç¾èå…¥ Docusaurus ä¸»é¡Œï¼Œæ”¯æ´æ˜æš—æ¨¡å¼åˆ‡æ›
* **å®Œæ•´å¸ƒå±€**ï¼šæœå°‹çµæœé é¢åŒ…å«é é¦–å’Œé å°¾ï¼Œä¿æŒç¶²ç«™ä¸€è‡´æ€§
* **è‡ªå‹•ç´¢å¼•**ï¼šåœ¨å»ºç½®æ™‚è‡ªå‹•ç”Ÿæˆæœå°‹ç´¢å¼•ï¼Œä¸¦è¤‡è£½åˆ°å¤šå€‹ä½ç½®å¢å¼·å…¼å®¹æ€§
* **æ™ºèƒ½æœå°‹å»¶é²**ï¼šç•¶ 3 ç§’å…§æœå°‹æ¬¡æ•¸è¶…é 2 æ¬¡æ™‚ï¼Œè‡ªå‹•å•Ÿç”¨ç¯€æµæ©Ÿåˆ¶
* **å¤šè·¯å¾‘å…¼å®¹**ï¼šè‡ªå‹•å˜—è©¦å¤šå€‹å¯èƒ½çš„ç´¢å¼•è·¯å¾‘ï¼Œç¢ºä¿åœ¨ä¸åŒç’°å¢ƒä¸‹æ­£å¸¸å·¥ä½œ
* **URL æ™ºèƒ½ä¿®å¾©**ï¼šè‡ªå‹•æª¢æ¸¬åŸºç¤è·¯å¾‘ï¼Œä¿®å¾©æœå°‹çµæœéˆæ¥

## å®‰è£æ–¹å¼

### å…ˆæ±ºæ¢ä»¶

* Docusaurus v3.0.0 æˆ–ä»¥ä¸Šç‰ˆæœ¬
* Node.js v16.0.0 æˆ–ä»¥ä¸Šç‰ˆæœ¬

### æ­¥é©Ÿ

**1. åœ¨ä½ çš„ Docusaurus é …ç›®ä¸­å®‰è£å¿…è¦ä¾è³´åŠæ’ä»¶ç›®éŒ„ï¼š**

* å¿…é ˆå®‰è£çš„å¿…è¦ä¾è³´ï¼š

| å¥—ä»¶ | èªªæ˜ | å®‰è£æŒ‡ä»¤ |
|---|----|-------|
| minisearch | å‰ç«¯å…¨æ–‡æœå°‹å¼•æ“ | npm install minisearch |
| globby | æª”æ¡ˆè·¯å¾‘æŠ“å–å·¥å…· | npm install globby |
| gray-matter | è§£æ .md / .mdx å‰ç½® metadata | npm install gray-matter |

```
npm install minisearch globby gray-matter
```
* å‰µå»ºæ’ä»¶ç›®éŒ„ï¼š
```bash
mkdir -p plugins/docusaurus-plugin-minisearch
```

**2. è¤‡è£½æ’ä»¶æª”æ¡ˆåˆ°è©²ç›®éŒ„ï¼š**

```bash
# è¤‡è£½ä»¥ä¸‹æª”æ¡ˆåˆ°æ’ä»¶ç›®éŒ„
# - index.js
# - indexGenerator.js
# - SearchBar.js
# - SearchResults.js
# - styles.module.css
```

**3. åœ¨ `docusaurus.config.js` ä¸­æ·»åŠ æ’ä»¶é…ç½®ï¼š**

```js
// docusaurus.config.js
const config = {
  // å…¶ä»–é…ç½®...
  plugins: [
    [
      './plugins/docusaurus-plugin-minisearch',
      {
        // åŸºæœ¬é…ç½®ï¼ˆå¿…è¦ï¼‰
        indexPath: '/search-index.json',  // æœå°‹ç´¢å¼•æª”æ¡ˆè·¯å¾‘
        searchResultPath: '/search-results',  // æœå°‹çµæœé¡¯ç¤ºé é¢è·¯å¾‘
        searchFields: ['title', 'content'],  // è¦æœå°‹çš„æ¬„ä½
        resultFields: ['title', 'url', 'excerpt'],  // è¦é¡¯ç¤ºçš„çµæœæ¬„ä½
        
        // å¯é¸é…ç½®
        maxResults: 10,  // æœ€å¤§é¡¯ç¤ºçµæœæ•¸é‡
        highlightColor: '#ffeb3b',  // æœå°‹é—œéµå­—é«˜äº®é¡è‰²
        debounceTime: 3000  // é€£çºŒæœå°‹çš„æœ€å°é–“éš”æ™‚é–“(æ¯«ç§’)
      }
    ],
  ],
};
```

## é…ç½®é¸é …

ä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„é…ç½®é¸é …ï¼Œé€™äº›é¸é …åœ¨ `index.js` ä¸­å®šç¾©ï¼š

| é¸é … | é¡å‹ | é»˜èªå€¼ | å¿…è¦æ€§ | èªªæ˜ |
|------|------|--------|--------|------|
| indexPath | String | '/search-index.json' | å¯é¸ | æœå°‹ç´¢å¼•æª”æ¡ˆè·¯å¾‘ |
| searchResultPath | String | '/search-results' | å¯é¸ | æœå°‹çµæœé¡¯ç¤ºé é¢è·¯å¾‘ |
| searchFields | Array | ['title', 'content'] | å¯é¸ | è¦æœå°‹çš„æ¬„ä½ |
| resultFields | Array | ['title', 'url', 'excerpt'] | å¯é¸ | è¦é¡¯ç¤ºçš„çµæœæ¬„ä½ |
| maxResults | Number | 10 | å¯é¸ | æœ€å¤§é¡¯ç¤ºçµæœæ•¸é‡ |
| highlightColor | String | '#ffeb3b' | å¯é¸ | æœå°‹é—œéµå­—é«˜äº®é¡è‰² |
| debounceTime | Number | 3000 | å¯é¸ | é€£çºŒæœå°‹çš„æœ€å°é–“éš”æ™‚é–“(æ¯«ç§’) |

## æŠ€è¡“å¯¦ç¾

### æ’ä»¶æ¶æ§‹

æ’ä»¶ç”±ä»¥ä¸‹æ ¸å¿ƒçµ„ä»¶æ§‹æˆï¼š

1. **ç´¢å¼•ç”Ÿæˆå™¨ (indexGenerator.js)** - å¾æ–‡æª”æª”æ¡ˆç”Ÿæˆæœå°‹ç´¢å¼•
2. **æœå°‹æ¡†çµ„ä»¶ (SearchBar.js)** - æ•´åˆåˆ° Docusaurus å°èˆªæ¬„ï¼Œå¯¦ç¾æ™ºèƒ½æœå°‹å»¶é²åŠŸèƒ½
3. **æœå°‹çµæœé é¢ (SearchResults.js)** - é¡¯ç¤ºæœå°‹çµæœï¼Œå¯¦ç¾å¤šå±¤æ¬¡é«˜äº®å’Œ URL ä¿®å¾©
4. **æ’ä»¶ä¸»æ–‡ä»¶ (index.js)** - é€£æ¥å„çµ„ä»¶ï¼Œè™•ç†é…ç½®ï¼Œæ³¨å…¥å…¨å±€æ¨£å¼
5. **æ¨£å¼æ–‡ä»¶ (styles.module.css)** - å®šç¾©æœå°‹æ¡†ã€æœå°‹çµæœã€é«˜äº®é—œéµå­—ç­‰æ¨£å¼

### ä½¿ç”¨çš„é—œéµæŠ€è¡“

* **MiniSearch** - è¼•é‡ç´šä½†åŠŸèƒ½å¼·å¤§çš„å‰ç«¯å…¨æ–‡æœå°‹å¼•æ“
* **Docusaurus Theme API** - é›†æˆåˆ° Docusaurus ä¸»é¡Œç³»çµ±
* **React Hooks** - ç®¡ç†æœå°‹ç‹€æ…‹å’Œç´¢å¼•è¼‰å…¥
* **Docusaurus Plugin API** - è¨»å†Šè·¯ç”±å’Œå…±äº«é…ç½®æ•¸æ“š
* **CSS Modules** - çµ„ä»¶æ¨£å¼éš”é›¢ï¼Œé¿å…æ¨£å¼è¡çª

### å·¥ä½œåŸç†

1. **ç´¢å¼•ç”Ÿæˆ**
   * åœ¨å»ºç½®æ™‚éæ­·æ‰€æœ‰æ–‡æª”æª”æ¡ˆ
   * æå–æ¨™é¡Œã€å…§å®¹ã€URL ç­‰ä¿¡æ¯
   * ç”Ÿæˆ JSON ç´¢å¼•æª”æ¡ˆå­˜æ”¾åœ¨ `static` ç›®éŒ„
   * ç´¢å¼•æ–‡ä»¶æœƒè¢«è¤‡è£½åˆ°å¤šå€‹ä½ç½®ï¼Œå¢å¼·å…¼å®¹æ€§
   
2. **æœå°‹æµç¨‹**
   * ç”¨æˆ¶åœ¨å°èˆªæ¬„æœå°‹æ¡†è¼¸å…¥é—œéµå­—
   * æ™ºèƒ½å»¶é²åŠŸèƒ½æª¢æ¸¬æœå°‹é »ç‡ï¼Œé˜²æ­¢çŸ­æ™‚é–“å…§é »ç¹æœå°‹
   * é»æ“Šæœå°‹æŒ‰éˆ•å¾Œå°èˆªè‡³æœå°‹çµæœé é¢
   * æœå°‹çµæœé é¢å˜—è©¦å¾å¤šå€‹å¯èƒ½çš„è·¯å¾‘è¼‰å…¥ç´¢å¼•æª”æ¡ˆ
   * ä½¿ç”¨ MiniSearch åœ¨ç€è¦½å™¨ä¸­é€²è¡Œæœå°‹ï¼Œæ”¯æ´å‰ç¶´åŒ¹é…ã€æ¨¡ç³ŠåŒ¹é…å’Œå­—æ®µåŠ æ¬Š
   * ä½¿ç”¨å¤šå±¤æ¬¡åŒ¹é…ç­–ç•¥æ¸²æŸ“æœå°‹çµæœä¸¦é«˜äº®é—œéµå­—

3. **é«˜äº®åŠŸèƒ½å¯¦ç¾**
   * ä½¿ç”¨å¤šå±¤æ¬¡åŒ¹é…ç­–ç•¥ï¼ŒæŒ‰å„ªå…ˆé †åºå˜—è©¦ï¼š
     1. åŸå§‹æŸ¥è©¢è©åŒ¹é…ï¼ˆå¦‚æœå°‹"READ"æ™‚ï¼‰
     2. å®Œæ•´è©åŒ¹é…ï¼ˆåˆ†è©å¾Œçš„æ¯å€‹è©ï¼‰
     3. åŒ…å«åŒ¹é…ï¼ˆåŒ…å«æœå°‹è©çš„å–®è©ï¼‰
     4. éƒ¨åˆ†è©åŒ¹é…ï¼ˆé•·åº¦>=3çš„è©çš„å­ä¸²ï¼‰
   * ä½¿ç”¨ CSS å’Œå…§è¯æ¨£å¼çµåˆçš„æ–¹å¼ç¢ºä¿é«˜äº®æ•ˆæœåœ¨å„ç¨®ç’°å¢ƒä¸‹æ­£å¸¸é¡¯ç¤º

4. **URL ä¿®å¾©æ©Ÿåˆ¶**
   * è‡ªå‹•æª¢æ¸¬ç•¶å‰ç’°å¢ƒçš„åŸºç¤è·¯å¾‘ï¼Œä½¿ç”¨å¤šç¨®æ–¹æ³•ï¼š
     1. å¾ Docusaurus meta æ¨™ç±¤ç²å–
     2. æª¢æŸ¥ç•¶å‰ URL è·¯å¾‘
     3. æª¢æŸ¥æ˜¯å¦åœ¨æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
     4. å¾æœå°‹çµæœé é¢ URL ç²å–
     5. å¾æ–‡æª”éˆæ¥æ¨æ–·
   * ç¢ºä¿æœå°‹çµæœéˆæ¥åœ¨ä¸åŒéƒ¨ç½²ç’°å¢ƒä¸‹æ­£ç¢ºå·¥ä½œ

## è‡ªå®šç¾©

### è‡ªå®šç¾©æœå°‹çµæœæ¨£å¼

ä¿®æ”¹ `styles.module.css` æª”æ¡ˆå¯è‡ªå®šç¾©æœå°‹çµæœçš„å¤–è§€ï¼š

```css
/* ä¿®æ”¹æœå°‹çµæœé …ç›®æ¨£å¼ */
.resultItem {
  margin-bottom: 1.5rem;
  padding: 1.25rem;
  border-radius: 8px;
  background-color: var(--ifm-card-background-color);
  box-shadow: var(--ifm-global-shadow-lw);
  transition: all 0.2s ease;
  border-left: 4px solid var(--ifm-color-primary);
}

/* ä¿®æ”¹é«˜äº®é—œéµå­—æ¨£å¼ */
.highlight,
:global(.search-highlight) {
  background-color: var(--search-highlight-color, #ffeb3b) !important;
  color: #000 !important;
  padding: 0 2px !important;
  border-radius: 2px !important;
  font-weight: bold !important;
  display: inline !important;
}

/* ç¯€æµç‹€æ…‹çš„æœå°‹æ¡† */
.throttled {
  border-color: var(--ifm-color-warning, #f0ad4e);
  background-color: rgba(240, 173, 78, 0.05);
  animation: pulse 1.5s infinite;
}
```

### è‡ªå®šç¾©æœå°‹é¸é …

åœ¨ `SearchResults.js` ä¸­ä¿®æ”¹æœå°‹é¸é …ï¼š

```javascript
const hits = miniSearch.search(query, { 
  prefix: true,      // å‰ç¶´æœå°‹
  boost: { title: 2 }, // æ¨™é¡Œæ¬Šé‡ç‚º 2
  fuzzy: 0.2         // æ¨¡ç³Šæœå°‹ï¼Œå®¹è¨± 20% çš„ç·¨è¼¯è·é›¢
});
```

## å¸¸è¦‹å•é¡Œ

**Q: æœå°‹ç´¢å¼•æœƒå¢åŠ ç¶²ç«™å¤§å°å—ï¼Ÿ**  
A: æœƒï¼Œä½†å¹…åº¦æœ‰é™ã€‚å°æ–¼ä¸­å°å‹æ–‡æª”ç¶²ç«™ï¼Œç´¢å¼•é€šå¸¸åœ¨å¹¾ç™¾KBç¯„åœå…§ã€‚

**Q: å¦‚ä½•æ›´æ–°æœå°‹ç´¢å¼•ï¼Ÿ**  
A: æ¯æ¬¡é‡æ–°å»ºç½®ç¶²ç«™æ™‚æœƒè‡ªå‹•æ›´æ–°ç´¢å¼•ã€‚

**Q: æœå°‹çµæœæ˜¯å¦æ”¯æ´å¤šèªè¨€ï¼Ÿ**  
A: åŸºæœ¬æ”¯æ´ï¼Œä½†å¯èƒ½éœ€è¦é‡å°ä¸åŒèªè¨€èª¿æ•´åˆ†è©è¨­å®šã€‚

**Q: ç‚ºä»€éº¼æœå°‹çµæœé é¢é¡¯ç¤ºã€Œé é¢æœªæ‰¾åˆ°ã€ï¼Ÿ**  
A: é€™é€šå¸¸æ˜¯ç”±æ–¼è·¯ç”±è¡çªå°è‡´ã€‚ç¢ºä¿ `searchResultPath` è¨­ç½®ç‚ºä¸€å€‹ä¸èˆ‡å…¶ä»–è·¯ç”±è¡çªçš„å€¼ã€‚

**Q: ç‚ºä»€éº¼ä¿®æ”¹ indexPath å¾Œï¼Œæœå°‹åŠŸèƒ½ä¾ç„¶æ­£å¸¸å·¥ä½œï¼Ÿ**  
A: æ’ä»¶è¨­è¨ˆäº†å¤šé‡å‚™ä»½æ©Ÿåˆ¶ï¼Œæœƒå˜—è©¦å¤šå€‹å¯èƒ½çš„ç´¢å¼•è·¯å¾‘ï¼Œç¢ºä¿å³ä½¿é…ç½®æœ‰è®ŠåŒ–ï¼ŒåŠŸèƒ½ä¹Ÿèƒ½æ­£å¸¸é‹è¡Œã€‚

**Q: ç‚ºä»€éº¼çŸ­æ™‚é–“å…§å¤šæ¬¡æœå°‹æœƒè¢«é™åˆ¶ï¼Ÿ**  
A: æ’ä»¶å¯¦ä½œäº†æ™ºèƒ½æœå°‹å»¶é²åŠŸèƒ½ï¼Œç•¶ 3 ç§’å…§æœå°‹æ¬¡æ•¸è¶…é 2 æ¬¡æ™‚ï¼Œæœƒå•Ÿç”¨ç¯€æµæ©Ÿåˆ¶ï¼Œé˜²æ­¢éåº¦è«‹æ±‚ã€‚

## æŠ€è¡“é™åˆ¶

* ç´”å‰ç«¯æœå°‹ï¼Œä¸é©ç”¨æ–¼æ¥µå¤§å‹æ–‡æª”åº«
* æœå°‹ç´¢å¼•éœ€è¦åœ¨å»ºç½®æ™‚ç”Ÿæˆï¼Œç„¡æ³•åŒ…å«å‹•æ…‹å…§å®¹
* ç›®å‰æ²’æœ‰å…§ç½®çš„æœå°‹å»ºè­°åŠŸèƒ½
* å°æ–¼ä¸­æ–‡ç­‰äºæ´²èªè¨€ï¼Œæ²’æœ‰å°ˆé–€çš„åˆ†è©å„ªåŒ–

## æ–‡æª”æ›´æ–°èˆ‡ç´¢å¼•ç¶­è­·

### æ·»åŠ æ–°æ–‡æª”å¾Œæ›´æ–°æœå°‹ç´¢å¼•

ç•¶ä½ æ·»åŠ æˆ–ä¿®æ”¹æ–‡æª”å¾Œï¼Œæœå°‹ç´¢å¼•éœ€è¦æ›´æ–°æ‰èƒ½åæ˜ æ–°å…§å®¹ã€‚æœ‰ä»¥ä¸‹å¹¾ç¨®æ–¹å¼ï¼š

#### æ–¹æ³•ä¸€ï¼šå®Œæ•´é‡å»ºç«™é»

æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯é‡æ–°æ§‹å»ºæ•´å€‹ç¶²ç«™ï¼š

```bash
npm run build
# ç„¶å¾Œé‡æ–°éƒ¨ç½²ç¶²ç«™
```
#### æ–¹æ³•äºŒï¼šå–®ç¨æ›´æ–°ç´¢å¼•æ–‡ä»¶ï¼ˆé©ç”¨æ–¼ VPS/ä¼ºæœå™¨éƒ¨ç½²ï¼‰

å¦‚æœä½ åªæ·»åŠ æˆ–ä¿®æ”¹äº†æ–‡æª”å…§å®¹ï¼Œè€Œä¸æƒ³é‡å»ºæ•´å€‹ç¶²ç«™ï¼Œå¯ä»¥ï¼š

1. åœ¨æœ¬åœ°ç’°å¢ƒç”Ÿæˆæ–°çš„ç´¢å¼•æ–‡ä»¶ï¼š
   ```bash
   npm start
   ```

2. ç­‰å¾…ç´¢å¼•ç”Ÿæˆå®Œæˆï¼ˆé€šå¸¸æœƒåœ¨æ§åˆ¶å°çœ‹åˆ° `âœ… search-index.json å·²è¤‡è£½åˆ° [è·¯å¾‘] æˆåŠŸ` çš„è¨Šæ¯ï¼‰

3. å°‡ä»¥ä¸‹æ–‡ä»¶ä¸Šå‚³åˆ°ä½ çš„ä¼ºæœå™¨ï¼š
   - æ–°å¢çš„æ–‡æª”æ–‡ä»¶
   - ä½æ–¼ `static/search-index.json` çš„æ–°ç´¢å¼•æ–‡ä»¶

4. ç¢ºä¿ç´¢å¼•æ–‡ä»¶ä¸Šå‚³åˆ°æ­£ç¢ºä½ç½®ï¼Œé€šå¸¸æ˜¯ï¼š
   - `/path-to-your-website/search-index.json`
   - ä»¥åŠæ’ä»¶å¯èƒ½å˜—è©¦çš„å…¶ä»–è·¯å¾‘

é€™ç¨®æ–¹æ³•ç‰¹åˆ¥é©åˆæ–‡æª”é »ç¹æ›´æ–°ä½†ç¶²ç«™çµæ§‹ç©©å®šçš„æƒ…æ³ï¼Œå¯ä»¥ç¯€çœéƒ¨ç½²æ™‚é–“ä¸¦æ¸›å°‘è³‡æºæ¶ˆè€—ã€‚

### è·¯å¾‘èˆ‡éƒ¨ç½²æ³¨æ„äº‹é …

åœ¨ä¸åŒç’°å¢ƒï¼ˆæœ¬åœ°é–‹ç™¼ã€GitHub Pagesã€è‡ªè¨—ç®¡ VPS ç­‰ï¼‰ä¸­ï¼Œç¶²ç«™çš„åŸºç¤è·¯å¾‘å¯èƒ½ä¸åŒï¼š

- æœ¬åœ°é–‹ç™¼ï¼šé€šå¸¸æ˜¯ `http://localhost:3000/`
- GitHub Pagesï¼šé€šå¸¸æ˜¯ `https://username.github.io/repo-name/`
- è‡ªè¨—ç®¡ï¼šå¯èƒ½æ˜¯ `https://your-domain.com/` æˆ– `https://your-domain.com/docs/`

æ’ä»¶æœƒå˜—è©¦è‡ªå‹•æª¢æ¸¬ç•¶å‰ç’°å¢ƒçš„åŸºç¤è·¯å¾‘ï¼Œä¸¦å˜—è©¦å¤šå€‹å¯èƒ½çš„ç´¢å¼•è·¯å¾‘ï¼Œä½†å¦‚æœé‡åˆ°å•é¡Œï¼ˆä¾‹å¦‚æœå°‹çµæœéˆæ¥éŒ¯èª¤ï¼‰ï¼Œå¯ä»¥åœ¨ `docusaurus.config.js` ä¸­æ˜ç¢ºè¨­ç½® `baseUrl`ï¼š

```javascript
module.exports = {
  // ...
  baseUrl: '/your-base-path/',  // ä¾‹å¦‚ '/docs/' æˆ– '/'
  // ...
};
```

## å¯¦ä½œç´°ç¯€èˆ‡æ³¨æ„äº‹é …

### å¤šè·¯å¾‘å˜—è©¦æ©Ÿåˆ¶

æ’ä»¶æœƒå˜—è©¦å¾å¤šå€‹å¯èƒ½çš„è·¯å¾‘åŠ è¼‰ç´¢å¼•æ–‡ä»¶ï¼š

```javascript
const possiblePaths = [
    // åŸå§‹è·¯å¾‘
    indexPath,
    // ç›¸å°è·¯å¾‘
    './search-index.json',
    // çµ•å°è·¯å¾‘
    '/search-index.json',
    // åŸºæ–¼ç•¶å‰ç«™é»çš„è·¯å¾‘
    window.location.pathname.split('/search-results')[0] + '/search-index.json'
];
```

é€™ç¨®è¨­è¨ˆç¢ºä¿å³ä½¿é…ç½®æœ‰è®ŠåŒ–ï¼Œæœç´¢åŠŸèƒ½ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚

### æ™ºèƒ½æœå°‹å»¶é²åŠŸèƒ½

æ’ä»¶å¯¦ä½œäº†æ™ºèƒ½æœå°‹å»¶é²åŠŸèƒ½ï¼Œåªæœ‰åœ¨çŸ­æ™‚é–“å…§é »ç¹æœå°‹æ™‚æ‰æœƒå•Ÿå‹•å»¶é²ï¼š

```javascript
// æª¢æŸ¥æ˜¯å¦éœ€è¦ç¯€æµ
const checkThrottle = () => {
    const now = Date.now();
    const history = searchHistoryRef.current;
    
    // æ·»åŠ ç•¶å‰æœå°‹æ™‚é–“åˆ°æ­·å²è¨˜éŒ„
    history.push(now);
    
    // åªä¿ç•™æœ€è¿‘ 3 ç§’å…§çš„è¨˜éŒ„
    const recentHistory = history.filter(time => now - time < debounceTime);
    searchHistoryRef.current = recentHistory;
    
    // å¦‚æœ 3 ç§’å…§æœå°‹æ¬¡æ•¸è¶…é 2 æ¬¡ï¼Œå‰‡å•Ÿç”¨ç¯€æµ
    const needThrottle = recentHistory.length > 2;
    
    // ...
};
```

### MiniSearch ä½¿ç”¨æ³¨æ„äº‹é …

ä½¿ç”¨ `MiniSearch.loadJSON` æ™‚éœ€ç›´æ¥å‚³å…¥ JSON å­—ç¬¦ä¸²è€Œéè§£æå¾Œçš„å°è±¡ï¼š

```javascript
// éŒ¯èª¤æ–¹å¼
const rawIndex = JSON.parse(text);
const miniSearch = MiniSearch.loadJSON(rawIndex, options);

// æ­£ç¢ºæ–¹å¼
const miniSearch = MiniSearch.loadJSON(text, options);
```

### è·¯ç”±è¨­ç½®æ³¨æ„äº‹é …

é¿å…æœå°‹çµæœè·¯å¾‘èˆ‡ Docusaurus é»˜èªè·¯å¾‘è¡çªï¼š

```javascript
// æ¨è–¦ä½¿ç”¨å°ˆç”¨è·¯å¾‘
searchResultPath = '/search-results'

// ç¢ºä¿ç²¾ç¢ºåŒ¹é…
addRoute({
  path: searchResultPath,
  component: '@theme/SearchResults',
  exact: true,
});
```

## æˆæ¬Šå”è­°

æœ¬å°ˆæ¡ˆä½¿ç”¨ MIT æˆæ¬Šå”è­°ã€‚